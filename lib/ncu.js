"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const PACKAGE_JSON = require("../package.json");
const updateNotifier = require("update-notifier");
const pkgUp = require("pkg-up");
const fs = require("fs-extra");
function checkUpdateSelf() {
    let data = updateNotifier({
        pkg: PACKAGE_JSON,
    });
    return data;
}
exports.checkUpdateSelf = checkUpdateSelf;
function checkUpdate(name) {
    let data = updateNotifier({
        pkg: readPackageJson(name),
    });
    return data;
}
exports.checkUpdate = checkUpdate;
function findPackagePath(name) {
    return pkgUp.sync(require.resolve(name));
}
exports.findPackagePath = findPackagePath;
function readPackageJson(name) {
    let pkg = fs.readJSONSync(findPackagePath(name));
    if (pkg.name != name) {
        throw new Error(`package name not match, '${pkg.name}' != '${name}'`);
    }
    return pkg;
}
exports.readPackageJson = readPackageJson;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmN1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibmN1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsZ0RBQWlEO0FBRWpELGtEQUFtRDtBQUNuRCxnQ0FBaUM7QUFDakMsK0JBQStCO0FBRS9CLFNBQWdCLGVBQWU7SUFFOUIsSUFBSSxJQUFJLEdBQUcsY0FBYyxDQUFDO1FBQ3pCLEdBQUcsRUFBRSxZQUFZO0tBQ2pCLENBQUMsQ0FBQztJQUVILE9BQU8sSUFBSSxDQUFDO0FBQ2IsQ0FBQztBQVBELDBDQU9DO0FBRUQsU0FBZ0IsV0FBVyxDQUFDLElBQVk7SUFFdkMsSUFBSSxJQUFJLEdBQUcsY0FBYyxDQUFDO1FBQ3pCLEdBQUcsRUFBRSxlQUFlLENBQUMsSUFBSSxDQUFDO0tBQzFCLENBQUMsQ0FBQztJQUVILE9BQU8sSUFBSSxDQUFDO0FBQ2IsQ0FBQztBQVBELGtDQU9DO0FBRUQsU0FBZ0IsZUFBZSxDQUFDLElBQVk7SUFFM0MsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMxQyxDQUFDO0FBSEQsMENBR0M7QUFFRCxTQUFnQixlQUFlLENBQUksSUFBWTtJQUU5QyxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBRWpELElBQUksR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQ3BCO1FBQ0MsTUFBTSxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsR0FBRyxDQUFDLElBQUksU0FBUyxJQUFJLEdBQUcsQ0FBQyxDQUFDO0tBQ3RFO0lBRUQsT0FBTyxHQUFHLENBQUM7QUFDWixDQUFDO0FBVkQsMENBVUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBQQUNLQUdFX0pTT04gPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKTtcbmltcG9ydCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuaW1wb3J0IHVwZGF0ZU5vdGlmaWVyID0gcmVxdWlyZSgndXBkYXRlLW5vdGlmaWVyJyk7XG5pbXBvcnQgcGtnVXAgPSByZXF1aXJlKCdwa2ctdXAnKTtcbmltcG9ydCAqIGFzIGZzIGZyb20gXCJmcy1leHRyYVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tVcGRhdGVTZWxmKClcbntcblx0bGV0IGRhdGEgPSB1cGRhdGVOb3RpZmllcih7XG5cdFx0cGtnOiBQQUNLQUdFX0pTT04sXG5cdH0pO1xuXG5cdHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tVcGRhdGUobmFtZTogc3RyaW5nKVxue1xuXHRsZXQgZGF0YSA9IHVwZGF0ZU5vdGlmaWVyKHtcblx0XHRwa2c6IHJlYWRQYWNrYWdlSnNvbihuYW1lKSxcblx0fSk7XG5cblx0cmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kUGFja2FnZVBhdGgobmFtZTogc3RyaW5nKTogc3RyaW5nXG57XG5cdHJldHVybiBwa2dVcC5zeW5jKHJlcXVpcmUucmVzb2x2ZShuYW1lKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkUGFja2FnZUpzb248VD4obmFtZTogc3RyaW5nKTogVCAmIHR5cGVvZiBQQUNLQUdFX0pTT05cbntcblx0bGV0IHBrZyA9IGZzLnJlYWRKU09OU3luYyhmaW5kUGFja2FnZVBhdGgobmFtZSkpO1xuXG5cdGlmIChwa2cubmFtZSAhPSBuYW1lKVxuXHR7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBwYWNrYWdlIG5hbWUgbm90IG1hdGNoLCAnJHtwa2cubmFtZX0nICE9ICcke25hbWV9J2ApO1xuXHR9XG5cblx0cmV0dXJuIHBrZztcbn1cbiJdfQ==